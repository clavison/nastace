<header class="header">
  <img src="assets/nastace_logo.png" alt="Nastace" class="logo" />
  <h1>{{ titulo }}</h1>

  <nav class="menu">
    <a (click)="irPara('historia')" [class.ativo]="pagina === 'historia'"
      >Nossa História</a
    >
    <a (click)="irPara('pedido')" [class.ativo]="pagina === 'pedido'"
      >Monte seu Gelato</a
    >
  </nav>
</header>

<!-- Página História -->
<main *ngIf="pagina === 'historia'" class="historia">
  <h2>Sobre a Nastace</h2>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras nec lorem a
    turpis varius elementum. Aliquam erat volutpat. Integer eget mi a nunc
    fermentum sagittis vitae a urna. Donec euismod, nisi eget feugiat feugiat,
    lacus nisl fermentum magna, vel dignissim purus sapien in erat.
  </p>

  <section class="equipe">
    <h2>Equipe</h2>
    <div class="membros">
      <div class="membro">
        <img src="https://i.pravatar.cc/150?img=3" />
        <p>Fulano de tal – Função</p>
      </div>
      <div class="membro">
        <img src="https://i.pravatar.cc/150?img=4" />
        <p>Fulano de tal – Função</p>
      </div>
      <div class="membro">
        <img src="https://i.pravatar.cc/150?img=5" />
        <p>Fulano de tal – Função</p>
      </div>
    </div>
  </section>
</main>

<!-- Página Pedido -->
<main *ngIf="pagina === 'pedido'">
  <!-- Etapa de montagem -->
  <section *ngIf="etapa === 'montagem'" class="montagem">
    <section class="visualizacao">
      <div class="linha-especial">
        <img
          src="assets/oie_transparent.png"
          alt="Encantos do Sítio"
          class="logo-encantos"
        />
        <span class="selo">Linha Especial</span>
      </div>

      <div class="gelato">
        <img src="assets/casquinha.png" class="camada taca" alt="taça" />
        <img *ngFor="let ing of selecionados" 
          [src]="ing.imagem" 
          class="camada" 
          [class.camada-base]="ing === baseSelecionada"
          [class.camada-recheio]="ing === recheioSelecionado"
          [class.camada-cobertura]="ing === coberturaSelecionada"
          [class.camada-sabor]="ing === saborSelecionado"
          alt="ingrediente" />
      </div>
      <div class="preco">Total: R$ {{ precoTotal }}</div>
    </section>

    <section class="opcoes">
      <h2>Monte seu Gelato</h2>
      <div class="grupo">
        <h3>Bases</h3>
        <button *ngFor="let b of bases" 
          (click)="selecionarBase(b)" 
          [class.selecionado]="baseSelecionada === b">
          {{ b.nome }}
        </button>
      </div>
      <div class="grupo">
        <h3>Recheios</h3>
        <button *ngFor="let r of recheios" 
        (click)="selecionarRecheio(r)"
        [class.selecionado]="recheioSelecionado === r">
          {{ r.nome }}
        </button>
      </div>
      <div class="grupo">
        <h3>Coberturas</h3>
        <button *ngFor="let c of coberturas" 
        (click)="selecionarCobertura(c)"
        [class.selecionado]="coberturaSelecionada === c">
          {{ c.nome }}
        </button>
      </div>
      <div class="grupo">
        <h3>Sabores Exclusivos</h3>
        <button *ngFor="let s of sabores" 
        (click)="selecionarSabor(s)"
        [class.selecionado]="saborSelecionado === s">
          {{ s.nome }}
        </button>
      </div>
      <div class="acoes">
        <button (click)="finalizar()">Finalizar Pedido</button>
        <button (click)="limpar()">Limpar</button>
      </div>
    </section>
  </section>

  <!-- Etapa de finalização -->
  <section *ngIf="etapa === 'finalizacao'" class="finalizacao">
    <h2>Finalizar Pedido</h2>
    <form (ngSubmit)="confirmarPedido()">
      <input
        placeholder="Nome"
        [(ngModel)]="cliente.nome"
        name="nome"
        required
      />
      <input
        placeholder="Endereço"
        [(ngModel)]="cliente.endereco"
        name="endereco"
        required
      />
      <input
        placeholder="Telefone"
        [(ngModel)]="cliente.telefone"
        name="telefone"
        required
      />
      <select [(ngModel)]="cliente.pagamento" name="pagamento" required>
        <option value="">Forma de Pagamento</option>
        <option value="cartao">Cartão</option>
        <option value="pix">PIX</option>
        <option value="entrega">Pagar na entrega</option>
      </select>
      <button type="submit">Confirmar Pedido</button>
    </form>
  </section>

  <!-- Etapa de pedido confirmado -->
  <section *ngIf="etapa === 'confirmado'" class="confirmado">
    <h2>Pedido Confirmado!</h2>
    <p>Obrigado {{ cliente.nome }}.</p>
    <p>Seu gelato chegará em até 40 minutos.</p>

    <button (click)="novoPedido()">Fazer Novo Pedido</button>
  </section>
</main>
